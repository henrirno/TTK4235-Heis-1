\hypertarget{fsm_8h}{}\section{source/fsm.h File Reference}
\label{fsm_8h}\index{source/fsm.\+h@{source/fsm.\+h}}


Koden til tilstandsmaskinen til heisen.  


{\ttfamily \#include \char`\"{}orders.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}timer.\+h\char`\"{}}\newline
{\ttfamily \#include $<$stdio.\+h$>$}\newline
Include dependency graph for fsm.\+h\+:
% FIG 0
This graph shows which files directly or indirectly include this file\+:
% FIG 1
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{fsm_8h_adafc33a2a11b884298303941b49f8be5}{initialize\+\_\+elevator} ()
\begin{DoxyCompactList}\small\item\em Heisen gjøres klart til bruk ved å gå til nærmeste underetasje og deretter nullstille bestillingsmatrisen. \end{DoxyCompactList}\item 
void \hyperlink{fsm_8h_a5002047d4be90850c4c01050595935a7}{elevator\+\_\+arriving\+\_\+floor} (int floor)
\begin{DoxyCompactList}\small\item\em Stopper heisen på etasje og åpner dør, eller hvis inititialized stopper den heisen og setter \hyperlink{structElevator}{Elevator} Behaviour til idle. \end{DoxyCompactList}\item 
void \hyperlink{fsm_8h_affd87d2ba18ceed5071f7e18198cc5dc}{button\+\_\+press\+\_\+event} (int btn\+\_\+floor, \hyperlink{hardware_8h_a796a8de8ce0ae769d7dbd3327a7bdbe7}{Hardware\+Order} order\+\_\+type)
\begin{DoxyCompactList}\small\item\em Hvis heisen er i den aktuelle etasjen, så åpner den døren. Hvis den ikke er i etasje legger den inn bestilling\+: Sjekker om heisen er i bevegelse, og bytter retning hvis forrige bestilling er over og på vei opp eller motsatt. Hvis heis ikke er i bevegelse, starter heisen etter den bestillingen. I tillegg printer den heisbevegelsen til terminalen og skrur på det aktuelle bestillingslyset. \end{DoxyCompactList}\item 
void \hyperlink{fsm_8h_a7e9a332d026a32072d6080c2f1264813}{close\+\_\+door} ()
\begin{DoxyCompactList}\small\item\em Lukker døren, skrur av den aktuelle bestillingslampen og nullstiller bestillingen. \end{DoxyCompactList}\item 
void \hyperlink{fsm_8h_afa3e685a3ff6ef91ed685514a8cc9b0d}{clear\+\_\+order\+\_\+light} ()
\begin{DoxyCompactList}\small\item\em Skrur av bestillingslampe spesifisert på bestillingstype. \end{DoxyCompactList}\item 
int \hyperlink{fsm_8h_a37f48fc7801516522a55b52156eec1d0}{check\+\_\+door\+\_\+open} ()
\begin{DoxyCompactList}\small\item\em Sjekker om døren er åpen og returnerer henholdsvis 0 eller 1. \end{DoxyCompactList}\item 
void \hyperlink{fsm_8h_a6dd61dcda897b3bd3a34856aa0140f4e}{stop\+\_\+button\+\_\+pressed} ()
\begin{DoxyCompactList}\small\item\em Hvis stopp-\/knappen holdes inne blir alle bestillinger og bestillingslys nullstilt og heisen står stille i nåværende posisjon frem til knappen ikke holdes inne. Setter også nåværende etasje til -\/1, så heisen er uavhengig av tidligere bevegelser når stopp-\/knappen ikke lenger trykkes inne. \end{DoxyCompactList}\item 
int \hyperlink{fsm_8h_a5c851c5ad2e7848eb3be84835fe7991e}{at\+\_\+floor} ()
\begin{DoxyCompactList}\small\item\em Sjekker om heisen er i en etasje og returnerer henholdsvis 0 eller 1. \end{DoxyCompactList}\item 
void \hyperlink{fsm_8h_afd77151474c3e94d7c52fd75413ae3ca}{clear\+\_\+all\+\_\+order\+\_\+lights} ()
\begin{DoxyCompactList}\small\item\em Nullstiller alle bestillingslamper. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
Koden til tilstandsmaskinen til heisen. 



\subsection{Function Documentation}
\mbox{\Hypertarget{fsm_8h_a5c851c5ad2e7848eb3be84835fe7991e}\label{fsm_8h_a5c851c5ad2e7848eb3be84835fe7991e}} 
\index{fsm.\+h@{fsm.\+h}!at\+\_\+floor@{at\+\_\+floor}}
\index{at\+\_\+floor@{at\+\_\+floor}!fsm.\+h@{fsm.\+h}}
\subsubsection{\texorpdfstring{at\+\_\+floor()}{at\_floor()}}
{\footnotesize\ttfamily int at\+\_\+floor (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Sjekker om heisen er i en etasje og returnerer henholdsvis 0 eller 1. 

\begin{DoxyReturn}{Returns}
returnerer 1 hvis heisen er i en etasje og 0 hvis ikke. 
\end{DoxyReturn}


Definition at line 215 of file fsm.\+c.

\mbox{\Hypertarget{fsm_8h_affd87d2ba18ceed5071f7e18198cc5dc}\label{fsm_8h_affd87d2ba18ceed5071f7e18198cc5dc}} 
\index{fsm.\+h@{fsm.\+h}!button\+\_\+press\+\_\+event@{button\+\_\+press\+\_\+event}}
\index{button\+\_\+press\+\_\+event@{button\+\_\+press\+\_\+event}!fsm.\+h@{fsm.\+h}}
\subsubsection{\texorpdfstring{button\+\_\+press\+\_\+event()}{button\_press\_event()}}
{\footnotesize\ttfamily void button\+\_\+press\+\_\+event (\begin{DoxyParamCaption}\item[{int}]{btn\+\_\+floor,  }\item[{\hyperlink{hardware_8h_a796a8de8ce0ae769d7dbd3327a7bdbe7}{Hardware\+Order}}]{order\+\_\+type }\end{DoxyParamCaption})}



Hvis heisen er i den aktuelle etasjen, så åpner den døren. Hvis den ikke er i etasje legger den inn bestilling\+: Sjekker om heisen er i bevegelse, og bytter retning hvis forrige bestilling er over og på vei opp eller motsatt. Hvis heis ikke er i bevegelse, starter heisen etter den bestillingen. I tillegg printer den heisbevegelsen til terminalen og skrur på det aktuelle bestillingslyset. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em btn\+\_\+floor} & i hvilken etasje knappen ble trykket på. \\
\hline
\mbox{\tt in}  & {\em order\+\_\+type} & forteller type Hardware\+Order. \\
\hline
\mbox{\tt out}  & {\em orders} & bestillingen registreres i bestillingsmatrisen. \\
\hline
\mbox{\tt out}  & {\em movement} & heisbevegelsen er gitt ut i fra bestillingen. \\
\hline
\mbox{\tt out}  & {\em behavior} & forteller at heisen nå er i bevegelse. \\
\hline
\end{DoxyParams}


Definition at line 52 of file fsm.\+c.

\mbox{\Hypertarget{fsm_8h_a37f48fc7801516522a55b52156eec1d0}\label{fsm_8h_a37f48fc7801516522a55b52156eec1d0}} 
\index{fsm.\+h@{fsm.\+h}!check\+\_\+door\+\_\+open@{check\+\_\+door\+\_\+open}}
\index{check\+\_\+door\+\_\+open@{check\+\_\+door\+\_\+open}!fsm.\+h@{fsm.\+h}}
\subsubsection{\texorpdfstring{check\+\_\+door\+\_\+open()}{check\_door\_open()}}
{\footnotesize\ttfamily int check\+\_\+door\+\_\+open (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Sjekker om døren er åpen og returnerer henholdsvis 0 eller 1. 

\begin{DoxyReturn}{Returns}
Returnerer 1 hvis døren er åpen og 0 hvis ikke. 
\end{DoxyReturn}


Definition at line 209 of file fsm.\+c.

\mbox{\Hypertarget{fsm_8h_afd77151474c3e94d7c52fd75413ae3ca}\label{fsm_8h_afd77151474c3e94d7c52fd75413ae3ca}} 
\index{fsm.\+h@{fsm.\+h}!clear\+\_\+all\+\_\+order\+\_\+lights@{clear\+\_\+all\+\_\+order\+\_\+lights}}
\index{clear\+\_\+all\+\_\+order\+\_\+lights@{clear\+\_\+all\+\_\+order\+\_\+lights}!fsm.\+h@{fsm.\+h}}
\subsubsection{\texorpdfstring{clear\+\_\+all\+\_\+order\+\_\+lights()}{clear\_all\_order\_lights()}}
{\footnotesize\ttfamily void clear\+\_\+all\+\_\+order\+\_\+lights (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Nullstiller alle bestillingslamper. 


\begin{DoxyParams}[1]{Parameters}
 & {\em $\ast$} & \\
\hline
\mbox{\tt out}  & {\em orders} & bestillingsmatrisen. \\
\hline
\end{DoxyParams}


Definition at line 178 of file fsm.\+c.

\mbox{\Hypertarget{fsm_8h_afa3e685a3ff6ef91ed685514a8cc9b0d}\label{fsm_8h_afa3e685a3ff6ef91ed685514a8cc9b0d}} 
\index{fsm.\+h@{fsm.\+h}!clear\+\_\+order\+\_\+light@{clear\+\_\+order\+\_\+light}}
\index{clear\+\_\+order\+\_\+light@{clear\+\_\+order\+\_\+light}!fsm.\+h@{fsm.\+h}}
\subsubsection{\texorpdfstring{clear\+\_\+order\+\_\+light()}{clear\_order\_light()}}
{\footnotesize\ttfamily void clear\+\_\+order\+\_\+light (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Skrur av bestillingslampe spesifisert på bestillingstype. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt out}  & {\em time\+\_\+start} & global tidsreferanse for å sette timer-\/tiden \\
\hline
\end{DoxyParams}


Definition at line 193 of file fsm.\+c.

\mbox{\Hypertarget{fsm_8h_a7e9a332d026a32072d6080c2f1264813}\label{fsm_8h_a7e9a332d026a32072d6080c2f1264813}} 
\index{fsm.\+h@{fsm.\+h}!close\+\_\+door@{close\+\_\+door}}
\index{close\+\_\+door@{close\+\_\+door}!fsm.\+h@{fsm.\+h}}
\subsubsection{\texorpdfstring{close\+\_\+door()}{close\_door()}}
{\footnotesize\ttfamily void close\+\_\+door (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Lukker døren, skrur av den aktuelle bestillingslampen og nullstiller bestillingen. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt out}  & {\em movement} & heisbevegelsen er gitt ut i fra bestillingen. \\
\hline
\mbox{\tt out}  & {\em behavior} & forteller om heisen er i Idle, bevegelse eller om døren åpnes. \\
\hline
\end{DoxyParams}


Definition at line 156 of file fsm.\+c.

\mbox{\Hypertarget{fsm_8h_a5002047d4be90850c4c01050595935a7}\label{fsm_8h_a5002047d4be90850c4c01050595935a7}} 
\index{fsm.\+h@{fsm.\+h}!elevator\+\_\+arriving\+\_\+floor@{elevator\+\_\+arriving\+\_\+floor}}
\index{elevator\+\_\+arriving\+\_\+floor@{elevator\+\_\+arriving\+\_\+floor}!fsm.\+h@{fsm.\+h}}
\subsubsection{\texorpdfstring{elevator\+\_\+arriving\+\_\+floor()}{elevator\_arriving\_floor()}}
{\footnotesize\ttfamily void elevator\+\_\+arriving\+\_\+floor (\begin{DoxyParamCaption}\item[{int}]{floor }\end{DoxyParamCaption})}



Stopper heisen på etasje og åpner dør, eller hvis inititialized stopper den heisen og setter \hyperlink{structElevator}{Elevator} Behaviour til idle. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em floor} & forteller hvilken etasje heisen er i \\
\hline
\mbox{\tt out}  & {\em behavior} & behaviour settes til Door\+Open eller Idle avhengig av casen til heisen \\
\hline
\end{DoxyParams}


Definition at line 18 of file fsm.\+c.

\mbox{\Hypertarget{fsm_8h_adafc33a2a11b884298303941b49f8be5}\label{fsm_8h_adafc33a2a11b884298303941b49f8be5}} 
\index{fsm.\+h@{fsm.\+h}!initialize\+\_\+elevator@{initialize\+\_\+elevator}}
\index{initialize\+\_\+elevator@{initialize\+\_\+elevator}!fsm.\+h@{fsm.\+h}}
\subsubsection{\texorpdfstring{initialize\+\_\+elevator()}{initialize\_elevator()}}
{\footnotesize\ttfamily void initialize\+\_\+elevator (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Heisen gjøres klart til bruk ved å gå til nærmeste underetasje og deretter nullstille bestillingsmatrisen. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt out}  & {\em movement} & heisbevegelsen blir satt med retning ned. \\
\hline
\mbox{\tt out}  & {\em behavior} & heisen blir satt \\
\hline
\end{DoxyParams}


Definition at line 5 of file fsm.\+c.

\mbox{\Hypertarget{fsm_8h_a6dd61dcda897b3bd3a34856aa0140f4e}\label{fsm_8h_a6dd61dcda897b3bd3a34856aa0140f4e}} 
\index{fsm.\+h@{fsm.\+h}!stop\+\_\+button\+\_\+pressed@{stop\+\_\+button\+\_\+pressed}}
\index{stop\+\_\+button\+\_\+pressed@{stop\+\_\+button\+\_\+pressed}!fsm.\+h@{fsm.\+h}}
\subsubsection{\texorpdfstring{stop\+\_\+button\+\_\+pressed()}{stop\_button\_pressed()}}
{\footnotesize\ttfamily void stop\+\_\+button\+\_\+pressed (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Hvis stopp-\/knappen holdes inne blir alle bestillinger og bestillingslys nullstilt og heisen står stille i nåværende posisjon frem til knappen ikke holdes inne. Setter også nåværende etasje til -\/1, så heisen er uavhengig av tidligere bevegelser når stopp-\/knappen ikke lenger trykkes inne. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt out}  & {\em behaviour} & forteller om heisens tilstand \\
\hline
\mbox{\tt out}  & {\em floor} & nåværende etasje \\
\hline
\end{DoxyParams}


Definition at line 225 of file fsm.\+c.

